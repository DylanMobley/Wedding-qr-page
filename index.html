<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dylan & Marianne Mobley's Honeymoon Fund</title>
  <style>
    :root{
      --pink:#e75480;
      --bg1:#ffe5b4;
      --bg2:#ffecd2;
      --ink:#333;
      --card:#fff7ef;
      --accent:#3a8f5b;
    }
    body{
      background: linear-gradient(to bottom right, var(--bg1), var(--bg2));
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      text-align:center;
      padding:2rem 1rem 3rem;
      color:var(--ink);
    }
    h1{ color:var(--pink); margin-bottom:.5rem; }
    p{ font-size:1.1rem; line-height:1.6; margin:.5rem auto; max-width:44rem; }
    a.button{
      display:inline-block; margin-top:1rem; padding:.9rem 1.5rem;
      font-size:1.1rem; color:#fff; background:var(--pink); border-radius:8px;
      text-decoration:none; font-weight:700; transition:filter .2s ease;
      box-shadow:0 6px 16px rgba(231,84,128,.25);
    }
    a.button:hover{ filter:brightness(.95); }
    /* --- Game card --- */
    .game-card{
      margin:2.25rem auto 0; max-width:44rem; background:var(--card);
      border:2px solid rgba(0,0,0,.06); border-radius:14px; padding:1rem 1rem 1.25rem;
      box-shadow:0 8px 24px rgba(0,0,0,.06);
    }
    .game-head{ font-weight:700; margin:.25rem 0 .5rem; color:#6b4423; }
    .game-sub{ font-size:.95rem; color:#5d5d5d; margin-top:0 }
    .hud{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size:.95rem; margin:.5rem 0 .75rem; color:#444; }
    /* Pixel canvas */
    .frame{
      width:min(92vw, 560px); aspect-ratio:16/9; margin:.5rem auto 0;
      image-rendering: pixelated; image-rendering: crisp-edges;
      border:6px solid #2b2420; border-radius:10px; background:#9fd8ff;
      box-shadow:inset 0 0 0 3px #fff;
    }
    canvas{ width:100%; height:100%; display:block; }
    /* Controls */
    .controls{
      display:flex; align-items:center; justify-content:center; gap:.75rem; margin-top:.75rem;
      flex-wrap:wrap;
    }
    button.ctrl{
      background:#fff; border:2px solid #222; color:#222; border-radius:10px;
      padding:.5rem .8rem; font-weight:700; min-width:3rem;
      box-shadow:0 4px 0 #222; transform:translateY(0); transition:transform .05s;
      touch-action:manipulation;
    }
    button.ctrl:active{ transform:translateY(2px); box-shadow:0 2px 0 #222; }
    .dpad{
      display:grid; grid-template-columns:repeat(3,42px); grid-template-rows:repeat(3,42px);
      gap:6px; margin:.25rem .5rem 0;
    }
    .dpad .sp{ visibility:hidden }
    .pill{ background:var(--accent); color:#fff; padding:.25rem .5rem; border-radius:999px; font-size:.8rem; }
    .sr{ position:absolute; left:-9999px; }
    @media (prefers-reduced-motion: reduce){
      *{ animation:none!important; transition:none!important }
    }
  </style>
</head>
<body>
  <h1>âœ¨ Please Join Us in Celebrating Our Next Chapter âœ¨</h1>
  <p>Weâ€™re so grateful for your love and support as we begin our life together. Instead of a traditional registry, weâ€™ve created a Honeymoon Fund to help us make lasting memories.</p>
  <p>If youâ€™d like to contribute, please visit:</p>
  <a href="https://tinyurl.com/DylanMarianneRSVP" target="_blank" class="button" aria-label="Contribute to our Honeymoon Fund via TinyURL">
    ðŸ‘‰ Contribute to Our Honeymoon Fund
  </a>

  <!-- Tiny 8-bit game -->
  <section class="game-card" aria-labelledby="gameTitle">
    <div class="pill">Bonus: Tiny 8-bit Game</div>
    <h2 id="gameTitle" class="game-head">Heart Quest â€” Collect the Love!</h2>
    <p class="game-sub">Use <strong>â—€ â–² â–¼ â–¶</strong> or the on-screen D-pad to move. Grab hearts, avoid crabs, and hit <strong>Space</strong> to pause.</p>
    <div class="hud" id="hud">Score: 0 &nbsp; | &nbsp; Time: 30s &nbsp; | &nbsp; Best: 0</div>

    <div class="frame">
      <canvas id="game" width="320" height="180" role="img" aria-label="Retro mini game: collect hearts before time runs out"></canvas>
    </div>

    <div class="controls" aria-label="On-screen game controls">
      <div class="dpad">
        <button class="ctrl" data-k="ArrowUp">â–²</button>
        <button class="ctrl sp" tabindex="-1" aria-hidden="true"></button>
        <button class="ctrl" data-k="ArrowRight">â–¶</button>
        <button class="ctrl" data-k="ArrowLeft">â—€</button>
        <button class="ctrl" data-k="ArrowDown">â–¼</button>
        <button class="ctrl sp" tabindex="-1" aria-hidden="true"></button>
        <button class="ctrl sp" tabindex="-1" aria-hidden="true"></button>
        <button class="ctrl" id="startBtn">Start</button>
        <button class="ctrl" id="pauseBtn">Pause</button>
      </div>
    </div>
  </section>

  <script>
    (() => {
      const canvas = document.getElementById('game');
      const ctx = canvas.getContext('2d');
      const hud = document.getElementById('hud');
      const startBtn = document.getElementById('startBtn');
      const pauseBtn = document.getElementById('pauseBtn');
      const keys = {};
      const press = (k,v)=>{ keys[k]=v; }
      document.addEventListener('keydown', e=>press(e.key,true));
      document.addEventListener('keyup', e=>press(e.key,false));
      document.querySelectorAll('[data-k]').forEach(b=>{
        const k=b.dataset.k;
        b.addEventListener('pointerdown', ()=>press(k,true));
        b.addEventListener('pointerup',   ()=>press(k,false));
        b.addEventListener('pointerleave',()=>press(k,false));
      });

      // World
      const W = canvas.width, H = canvas.height;
      const tile = 10; // pixel size for that 8-bit feel

      const state = {
        running:false,
        over:false,
        time:30,
        tAccum:0,
        score:0,
        best: +(localStorage.getItem('heartquest_best')||0),
        player:{x:W/2, y:H/2, s:8, vx:0, vy:0, speed:1.3},
        hearts:[],
        crabs:[]
      };

      function reset(){
        state.time = 30;
        state.tAccum = 0;
        state.score = 0;
        state.over = false;
        state.player.x = W/2; state.player.y = H/2;
        state.hearts = [];
        state.crabs = [];
        for(let i=0;i<6;i++) spawnHeart();
        for(let i=0;i<3;i++) spawnCrab();
        updateHud();
      }

      function spawnHeart(){
        state.hearts.push({
          x: 10+Math.random()*(W-20),
          y: 20+Math.random()*(H-40),
          r: 5 + Math.random()*3
        });
      }
      function spawnCrab(){
        const side = Math.random()<0.5 ? 0 : W;
        state.crabs.push({
          x: side,
          y: 30+Math.random()*(H-60),
          s: 8,
          vx: side===0 ? (0.6+Math.random()*0.6) : -(0.6+Math.random()*0.6)
        });
      }

      function drawBackground(){
        // sky
        ctx.fillStyle = '#9fd8ff'; ctx.fillRect(0,0,W,H);
        // ocean bands
        ctx.fillStyle = '#5cc1ff'; ctx.fillRect(0,H*0.55,W,H*0.25);
        ctx.fillStyle = '#44a9e9'; ctx.fillRect(0,H*0.60,W,H*0.08);
        // sand
        ctx.fillStyle = '#ffd59a'; ctx.fillRect(0,H*0.75,W,H*0.25);
        // palm silhouettes
        ctx.fillStyle = '#2b6b3d';
        ctx.fillRect(2,20,4,30);
        ctx.fillRect(W-6,18,4,34);
        // little dots in sand
        ctx.fillStyle = 'rgba(0,0,0,.08)';
        for(let i=0;i<20;i++){
          ctx.fillRect((i*17)%W, H-20 - (i%3)*6, 2, 2);
        }
      }

      function drawPlayer(){
        const p=state.player;
        // body (square)
        ctx.fillStyle = '#ff6fa5';
        ctx.fillRect(p.x-5,p.y-5,10,10);
        // face pixels
        ctx.fillStyle = '#fff'; ctx.fillRect(p.x-3,p.y-1,2,2);
        ctx.fillStyle = '#000'; ctx.fillRect(p.x-2,p.y,1,1);
        // tiny heart on chest
        pixelHeart(p.x+2,p.y+2,2,'#ff2f67');
      }

      function pixelHeart(cx,cy,scale,color){
        ctx.fillStyle=color;
        // a tiny pixel heart pattern
        const px=[
          [0,1],[1,0],[2,0],[3,1],[0,2],[1,3],[2,3],[3,2],[1,2],[2,2]
        ];
        px.forEach(([x,y])=>{
          ctx.fillRect(Math.floor(cx + (x-1.5)*scale), Math.floor(cy + (y-1.5)*scale), scale, scale);
        });
      }

      function drawHearts(){
        state.hearts.forEach(h=>{
          pixelHeart(h.x,h.y,3,'#ff1f64');
          pixelHeart(h.x,h.y-1,3,'#ff7099');
        });
      }

      function drawCrabs(){
        state.crabs.forEach(c=>{
          ctx.fillStyle = '#b33b3b';
          ctx.fillRect(c.x-6,c.y-3,12,6);
          // eyes
          ctx.fillStyle = '#fff'; ctx.fillRect(c.x-4,c.y-5,2,2); ctx.fillRect(c.x+2,c.y-5,2,2);
          ctx.fillStyle = '#000'; ctx.fillRect(c.x-3,c.y-4,1,1); ctx.fillRect(c.x+3,c.y-4,1,1);
          // legs
          ctx.fillStyle = '#8d2a2a';
          ctx.fillRect(c.x-7,c.y+2,3,1); ctx.fillRect(c.x+4,c.y+2,3,1);
        });
      }

      function clamp(v,min,max){ return Math.max(min, Math.min(max,v)); }

      function logic(dt){
        const p=state.player;
        // movement
        p.vx = (keys['ArrowRight']?1:0) - (keys['ArrowLeft']?1:0);
        p.vy = (keys['ArrowDown']?1:0) - (keys['ArrowUp']?1:0);
        const sp = state.running ? p.speed : 0;
        p.x = clamp(p.x + p.vx*sp*dt*60, 6, W-6);
        p.y = clamp(p.y + p.vy*sp*dt*60, 12, H-12);

        // hearts collision
        state.hearts = state.hearts.filter(h=>{
          const d = Math.hypot(h.x-p.x, h.y-p.y);
          if(d < 10){ state.score += 1; spawnHeart(); return false; }
          return true;
        });

        // crabs move + collide
        state.crabs.forEach(c=>{
          c.x += c.vx*dt*60;
          if(c.x < 10 || c.x > W-10){ c.vx *= -1; }
          const d = Math.hypot(c.x-p.x, c.y-p.y);
          if(d < 12){ // hit
            state.score = Math.max(0, state.score-1);
          }
        });

        // timer
        state.tAccum += dt;
        if(state.running && state.tAccum>=1){
          state.time -= 1; state.tAccum = 0;
          if(Math.random()<0.5) spawnCrab();
          if(state.time<=0){ state.running=false; state.over=true; if(state.score>state.best){ state.best=state.score; localStorage.setItem('heartquest_best', state.best); } }
          updateHud();
        }
      }

      function updateHud(){
        hud.textContent = `Score: ${state.score} | Time: ${state.time}s | Best: ${state.best}`;
      }

      let last=performance.now();
      function loop(t){
        const dt = Math.min(0.033, (t-last)/1000); last=t;
        drawBackground();
        drawHearts();
        drawCrabs();
        drawPlayer();
        if(state.over){
          ctx.fillStyle='rgba(0,0,0,.5)';
          ctx.fillRect(0,0,W,H);
          ctx.fillStyle='#fff';
          ctx.font='16px monospace';
          ctx.fillText('Time!', W/2-24, H/2-10);
          ctx.fillText(`Score: ${state.score}`, W/2-32, H/2+8);
        }
        logic(dt);
        requestAnimationFrame(loop);
      }

      function start(){ reset(); state.running = true; updateHud(); }
      function pause(){ state.running = !state.running; pauseBtn.textContent = state.running ? 'Pause' : 'Resume'; }

      startBtn.addEventListener('click', start);
      pauseBtn.addEventListener('click', pause);
      document.addEventListener('keydown', e=>{
        if(e.key === ' ') { e.preventDefault(); pause(); }
      });

      // boot
      reset(); requestAnimationFrame(loop);
    })();
  </script>
</body>
</html>
